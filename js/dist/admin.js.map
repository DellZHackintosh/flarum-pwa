{"version":3,"sources":["webpack://@askvortsov/flarum-pwa/webpack/bootstrap","webpack://@askvortsov/flarum-pwa/./admin.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWALogoUploadButton.js","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWAPage.js","webpack://@askvortsov/flarum-pwa/./src/admin/index.js","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/AdminNav']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/Alert']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/Button']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/Page']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/Switch']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/UploadImageButton']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['extend']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['utils/saveSettings']\""],"names":["PWALogoUploadButton","view","settings","app","data","props","loading","className","name","onclick","remove","bind","children","translator","trans","forum","attribute","trimRight","upload","resourceUrl","UploadImageButton","PWAPage","init","saving","refresh","status_messages","manifest","sizes","values","fields","forEach","key","m","prop","undefined","request","method","url","then","response","redraw","checkExistence","http","XMLHttpRequest","open","send","status","onsubmit","map","message","Alert","component","type","dismissible","short_name","withAttr","description","theme_color","Button","size","e","preventDefault","hex","test","alert","saveSettings","alerts","dismiss","successAlert","show","Page","initializers","add","routes","pwa","path","extensionSettings","route","extend","AdminNav","prototype","items","AdminLinkButton","href","icon"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","\nimport UploadImageButton from 'flarum/components/UploadImageButton';\nimport Alert from 'flarum/components/Alert';\n\nexport default class PWALogoUploadButton extends UploadImageButton {\n    view() {\n        const settings = app.data.settings;\n\n        this.props.loading = this.loading;\n        this.props.className = (this.props.className || '') + ' Button';\n\n        if (app.data.settings['askvortsov-pwa.icon_' + this.props.name + '_path']) {\n            this.props.onclick = this.remove.bind(this);\n            this.props.children = app.translator.trans('core.admin.upload_image.remove_button');\n\n            return (\n                <div>\n                    <p><img src={app.forum.attribute('basePath').trimRight('/') + '/assets/' + app.data.settings['askvortsov-pwa.icon_' + this.props.name + '_path']} alt=\"\" /></p>\n                    <p>{super.view()}</p>\n                </div>\n            );\n        } else {\n            this.props.onclick = this.upload.bind(this);\n            this.props.children = app.translator.trans('core.admin.upload_image.upload_button');\n        }\n\n        return super.view();\n    }\n\n    resourceUrl() {\n        return app.forum.attribute('apiUrl') + '/pwa/logo/' + this.props.name;\n    }\n}","import Page from 'flarum/components/Page';\nimport Button from 'flarum/components/Button';\nimport Alert from 'flarum/components/Alert';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport Switch from 'flarum/components/Switch';\nimport saveSettings from 'flarum/utils/saveSettings';\n\nimport PWALogoUploadButton from './PWALogoUploadButton';\n\nexport default class PWAPage extends Page {\n    init() {\n        super.init();\n\n        this.saving = false;\n        this.refresh();\n    }\n\n    refresh() {\n        this.loading = true;\n        const settings = app.data.settings;\n\n        this.status_messages = []\n        this.manifest = {};\n        this.sizes = [];\n        this.values = {};\n\n        this.fields = ['askvortsov-pwa.longName', 'askvortsov-pwa.backgroundColor'];\n        this.fields.forEach(key => this.values[key] = m.prop(settings[key] !== undefined ? settings[key] : ''));\n\n        // if (Array.isArray(settings['askvortsov-pwa.categories'])) {\n        //     this.values['askvortsov-pwa.categories'] = m.prop(settings['askvortsov-pwa.categories'].join(','));\n        // }\n\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/pwa/settings'\n        }).then(response => {\n            this.manifest = response['data']['attributes']['manifest'];\n            this.sizes = response['data']['attributes']['sizes'];\n            this.status_messages = response['data']['attributes']['status_messages'];\n\n            this.loading = false;\n            m.redraw();\n        });\n    }\n\n    checkExistence(url) {\n        let http = new XMLHttpRequest();\n\n        http.open('HEAD', url, false);\n        http.send();\n\n        return http.status != 404;\n    }\n\n    view() {\n        if (this.loading || this.saving) {\n            return (\n                <div className=\"PWAPage\">\n                    <div className=\"container\">\n                        <LoadingIndicator />\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"PWAPage\">\n                <div className=\"container\">\n                    <form onsubmit={this.onsubmit.bind(this)}>\n                        <h2>{app.translator.trans('askvortsov-pwa.admin.pwa.heading')}</h2>\n                        <div className=\"helpText\">\n                            {app.translator.trans('askvortsov-pwa.admin.pwa.text')}\n                        </div>\n\n                        <div class=\"statusCheck\">\n                            <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.status_check_heading')}</legend>\n                            {this.status_messages.map(message => {\n                                return Alert.component({ type: message.type, children: [message.message], dismissible: false })\n                            })}\n                        </div>\n\n                        <fieldset class=\"parent\">\n                            <fieldset>\n                                <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.about.heading')}</legend>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.about.short_name_text')}\n                                </div>\n                                <input className=\"FormControl\" value={this.manifest.short_name} disabled={true} ></input>\n                            </fieldset>\n                            <fieldset>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.about.name_text')}\n                                </div>\n                                <input className=\"FormControl\" value={this.values['askvortsov-pwa.longName']()} oninput={m.withAttr('value', this.values['askvortsov-pwa.longName'])} required={true} />\n                            </fieldset>\n                            <fieldset>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.about.description_text')}\n                                </div>\n                                <textarea className=\"FormControl\" value={this.manifest.description} disabled={true}>\n                                    {this.manifest.description}\n                                </textarea>\n                            </fieldset>\n                            {/* <fieldset>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.about.categories_text')}\n                                </div>\n                                <textarea className=\"FormControl\" value={this.values['askvortsov-pwa.categories']()} oninput={m.withAttr('value', this.values['askvortsov-pwa.categories'])}>\n                                    {this.manifest.description}\n                                </textarea>\n                            </fieldset> */}\n                        </fieldset>\n\n                        <fieldset class=\"parent\">\n                            <fieldset>\n                                <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.colors.heading')}</legend>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.colors.theme_color_text')}\n                                </div>\n                                <input className=\"FormControl\" type=\"text\" placeholder=\"#aaaaaa\" value={this.manifest.theme_color} disabled={true} />\n                            </fieldset>\n                            <fieldset>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.colors.background_color_text')}\n                                </div>\n                                <input className=\"FormControl\" type=\"text\" placeholder=\"#aaaaaa\" value={this.values['askvortsov-pwa.backgroundColor']()} oninput={m.withAttr('value', this.values['askvortsov-pwa.backgroundColor'])} required={true} />\n                            </fieldset>\n                        </fieldset>\n\n                        {Button.component({\n                            type: 'submit',\n                            className: 'Button Button--primary',\n                            children: app.translator.trans('askvortsov-pwa.admin.pwa.submit_button')\n                        })}\n\n                        <fieldset>\n                            <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.logo_heading')}</legend>\n                            <div className=\"helpText\">\n                                {app.translator.trans('askvortsov-pwa.admin.pwa.logo_text')}\n                            </div>\n                            {this.sizes.map(size => {\n                                return <fieldset class=\"logoFieldset\">\n                                    <PWALogoUploadButton name={size} />\n                                    <div className=\"helpText\">\n                                        {app.translator.trans('askvortsov-pwa.admin.pwa.logo_size_text', { size })}\n                                    </div>\n                                </fieldset>\n                            })}\n                        </fieldset>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n        const hex = /^#[0-9a-f]{3}([0-9a-f]{3})?$/i;\n\n        if (!hex.test(this.values['askvortsov-pwa.backgroundColor']())) {\n            alert(app.translator.trans('core.admin.appearance.enter_hex_message'));\n            return;\n        }\n        // this.values['askvortsov-pwa.categories'](this.values['askvortsov-pwa.categories']().split(',').map(function (item) {\n        //     return item.trim();\n        // }));\n        this.saveSettings();\n    }\n\n    saveSettings() {\n        if (this.saving) return;\n\n        this.saving = true;\n        app.alerts.dismiss(this.successAlert);\n\n        const settings = {};\n\n        this.fields.forEach(key => settings[key] = this.values[key]());\n\n        saveSettings(settings)\n            .then(() => {\n                app.alerts.show(this.successAlert = new Alert({ type: 'success', children: app.translator.trans('core.admin.basics.saved_message') }));\n            })\n            .catch(() => { })\n            .then(() => {\n                this.saving = false;\n                this.refresh();\n            });\n    }\n}","import { extend } from 'flarum/extend';\r\nimport AdminNav from 'flarum/components/AdminNav';\r\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\r\n\r\nimport PWAPage from './components/PWAPage';\r\n\r\napp.initializers.add('askvortsov/flarum-pwa', () => {\r\n  app.routes.pwa = {path: '/pwa', component: PWAPage.component() };\r\n\r\n  app.extensionSettings['askvortsov-pwa'] = () => m.route(app.route('pwa'));\r\n\r\n  extend(AdminNav.prototype, 'items', items => {\r\n    items.add('pwa', AdminLinkButton.component({\r\n      href: app.route('pwa'),\r\n      icon: 'fas fa-mobile-alt',\r\n      children: app.translator.trans('askvortsov-pwa.admin.nav.pwa_button'),\r\n      description: app.translator.trans('askvortsov-pwa.admin.nav.pwa_text')\r\n    }));\r\n  });\r\n});\r\n","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/UploadImageButton'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['utils/saveSettings'];"],"sourceRoot":""}