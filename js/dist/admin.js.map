{"version":3,"sources":["webpack://@askvortsov/flarum-pwa/webpack/bootstrap","webpack://@askvortsov/flarum-pwa/./admin.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWALogoUploadButton.js","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWAPage.js","webpack://@askvortsov/flarum-pwa/./src/admin/index.js","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/AdminNav']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/Alert']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/Button']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/Page']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/Switch']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['components/UploadImageButton']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['extend']\"","webpack://@askvortsov/flarum-pwa/external \"flarum.core.compat['utils/saveSettings']\""],"names":["PWALogoUploadButton","view","settings","app","data","props","loading","className","name","onclick","remove","bind","children","translator","trans","forum","attribute","trimRight","upload","resourceUrl","success","response","request","method","url","then","alerts","show","successAlert","Alert","type","saving","window","location","reload","UploadImageButton","PWAPage","init","refresh","status_messages","manifest","sizes","values","fields","forEach","key","m","prop","undefined","basePath","checkExistence","push","error","message","redraw","http","XMLHttpRequest","open","send","status","onsubmit","Switch","component","state","onchange","map","dismissible","short_name","withAttr","description","theme_color","Button","size","e","preventDefault","hex","test","alert","saveSettings","dismiss","Page","initializers","add","routes","pwa","path","extensionSettings","route","extend","AdminNav","prototype","items","AdminLinkButton","href","icon"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","\nimport UploadImageButton from 'flarum/components/UploadImageButton';\nimport Alert from 'flarum/components/Alert';\n\nexport default class PWALogoUploadButton extends UploadImageButton {\n    view() {\n        const settings = app.data.settings;\n\n        this.props.loading = this.loading;\n        this.props.className = (this.props.className || '') + ' Button';\n\n        if (app.data.settings['askvortsov-pwa.icon_' + this.props.name + '_path']) {\n            this.props.onclick = this.remove.bind(this);\n            this.props.children = app.translator.trans('core.admin.upload_image.remove_button');\n\n            return (\n                <div>\n                    <p><img src={app.forum.attribute('basePath').trimRight('/') + '/assets/' + app.data.settings['askvortsov-pwa.icon_' + this.props.name + '_path']} alt=\"\" /></p>\n                    <p>{super.view()}</p>\n                </div>\n            );\n        } else {\n            this.props.onclick = this.upload.bind(this);\n            this.props.children = app.translator.trans('core.admin.upload_image.upload_button');\n        }\n\n        return super.view();\n    }\n\n    resourceUrl() {\n        return app.forum.attribute('apiUrl') + '/pwa/logo/' + this.props.name;\n    }\n\n    success(response) {\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/pwa/refresh',\n        })\n            .then(() => {\n                app.alerts.show(this.successAlert = new Alert({ type: 'success', children: app.translator.trans('askvortsov-pwa.admin.pwa.refreshed_message') }));\n            })\n            .catch(() => { })\n            .then(() => {\n                this.saving = false;\n                window.location.reload();\n            });\n    }\n}","import Page from 'flarum/components/Page';\nimport Button from 'flarum/components/Button';\nimport Alert from 'flarum/components/Alert';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport Switch from 'flarum/components/Switch';\nimport saveSettings from 'flarum/utils/saveSettings';\n\nimport PWALogoUploadButton from './PWALogoUploadButton';\n\nexport default class PWAPage extends Page {\n    init() {\n        super.init();\n\n        this.saving = false;\n        this.refresh();\n    }\n\n    refresh() {\n        this.loading = true;\n        const settings = app.data.settings;\n\n        this.status_messages = []\n        this.manifest = {};\n        this.sizes = [];\n        this.values = {};\n\n        this.fields = ['askvortsov-pwa.enable', 'askvortsov-pwa.longName', 'askvortsov-pwa.backgroundColor'];\n        this.fields.forEach(key => this.values[key] = m.prop(settings[key] !== undefined ? settings[key] : ''));\n\n        this.values['askvortsov-pwa.enable'] = m.prop(settings['askvortsov-pwa.enable'] == '1');\n\n        // if (Array.isArray(settings['askvortsov-pwa.categories'])) {\n        //     this.values['askvortsov-pwa.categories'] = m.prop(settings['askvortsov-pwa.categories'].join(','));\n        // }\n\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/pwa/settings'\n        }).then(response => {\n            this.manifest = response['data']['attributes']['manifest'];\n            this.sizes = response['data']['attributes']['sizes'];\n            this.status_messages = response['data']['attributes']['status_messages'];\n\n            const basePath = response['data']['attributes']['base_path'];\n\n            if (this.values['askvortsov-pwa.enable']() && !this.checkExistence(basePath + 'sw.js')) {\n                this.status_messages.push({\n                    type: error,\n                    message: app.translator.trans('askvortsov-pwa.admin.status.sw_not_accessible')\n                });\n            }\n\n            if (this.values['askvortsov-pwa.enable']() && !this.checkExistence(basePath + 'webmanifest.json')) {\n                this.status_messages.push({\n                    type: error,\n                    message: app.translator.trans('askvortsov-pwa.admin.status.manifest_not_accessible')\n                });\n            }\n\n            this.loading = false;\n            m.redraw();\n        });\n    }\n\n    checkExistence(url) {\n        let http = new XMLHttpRequest();\n\n        http.open('HEAD', url, false);\n        http.send();\n\n        return http.status != 404;\n    }\n\n    view() {\n        if (this.loading || this.saving) {\n            return (\n                <div className=\"PWAPage\">\n                    <div className=\"container\">\n                        <LoadingIndicator />\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"PWAPage\">\n                <div className=\"container\">\n                    <form onsubmit={this.onsubmit.bind(this)}>\n                        <h2>{app.translator.trans('askvortsov-pwa.admin.pwa.heading')}</h2>\n                        <div className=\"helpText\">\n                            {app.translator.trans('askvortsov-pwa.admin.pwa.text')}\n                        </div>\n\n                        <fieldset>\n                            {Switch.component({\n                                state: this.values['askvortsov-pwa.enable'](),\n                                onchange: this.values['askvortsov-pwa.enable'],\n                                children: app.translator.trans('askvortsov-pwa.admin.pwa.enable_label'),\n                            })}\n                        </fieldset>\n\n                        <div class=\"statusCheck\">\n                            <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.status_check_heading')}</legend>\n                            {this.status_messages.map(message => {\n                                return Alert.component({ type: message.type, children: [message.message], dismissible: false })\n                            })}\n                        </div>\n\n                        <fieldset class=\"parent\">\n                            <fieldset>\n                                <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.about.heading')}</legend>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.about.short_name_text')}\n                                </div>\n                                <input className=\"FormControl\" value={this.manifest.short_name} disabled={true} ></input>\n                            </fieldset>\n                            <fieldset>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.about.name_text')}\n                                </div>\n                                <input className=\"FormControl\" value={this.values['askvortsov-pwa.longName']()} oninput={m.withAttr('value', this.values['askvortsov-pwa.longName'])} required={true} />\n                            </fieldset>\n                            <fieldset>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.about.description_text')}\n                                </div>\n                                <textarea className=\"FormControl\" value={this.manifest.description} disabled={true}>\n                                    {this.manifest.description}\n                                </textarea>\n                            </fieldset>\n                            {/* <fieldset>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.about.categories_text')}\n                                </div>\n                                <textarea className=\"FormControl\" value={this.values['askvortsov-pwa.categories']()} oninput={m.withAttr('value', this.values['askvortsov-pwa.categories'])}>\n                                    {this.manifest.description}\n                                </textarea>\n                            </fieldset> */}\n                        </fieldset>\n\n                        <fieldset class=\"parent\">\n                            <fieldset>\n                                <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.colors.heading')}</legend>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.colors.theme_color_text')}\n                                </div>\n                                <input className=\"FormControl\" type=\"text\" placeholder=\"#aaaaaa\" value={this.manifest.theme_color} disabled={true} />\n                            </fieldset>\n                            <fieldset>\n                                <div className=\"helpText\">\n                                    {app.translator.trans('askvortsov-pwa.admin.pwa.colors.background_color_text')}\n                                </div>\n                                <input className=\"FormControl\" type=\"text\" placeholder=\"#aaaaaa\" value={this.values['askvortsov-pwa.backgroundColor']()} oninput={m.withAttr('value', this.values['askvortsov-pwa.backgroundColor'])} />\n                            </fieldset>\n                        </fieldset>\n\n                        {Button.component({\n                            type: 'submit',\n                            className: 'Button Button--primary',\n                            children: app.translator.trans('askvortsov-pwa.admin.pwa.submit_button')\n                        })}\n\n                        <fieldset>\n                            <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.logo_heading')}</legend>\n                            <div className=\"helpText\">\n                                {app.translator.trans('askvortsov-pwa.admin.pwa.logo_text')}\n                            </div>\n                            {this.sizes.map(size => {\n                                return <fieldset class=\"logoFieldset\">\n                                    <PWALogoUploadButton name={size} />\n                                    <div className=\"helpText\">\n                                        {app.translator.trans('askvortsov-pwa.admin.pwa.logo_size_text', { size })}\n                                    </div>\n                                </fieldset>\n                            })}\n                        </fieldset>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n        const hex = /^#[0-9a-f]{3}([0-9a-f]{3})?$/i;\n\n        if (!hex.test(this.values['askvortsov-pwa.backgroundColor']())) {\n            alert(app.translator.trans('core.admin.appearance.enter_hex_message'));\n            return;\n        }\n        // this.values['askvortsov-pwa.categories'](this.values['askvortsov-pwa.categories']().split(',').map(function (item) {\n        //     return item.trim();\n        // }));\n        this.saveSettings();\n    }\n\n    saveSettings() {\n        if (this.saving) return;\n\n        this.saving = true;\n        app.alerts.dismiss(this.successAlert);\n\n        const settings = {};\n\n        this.fields.forEach(key => settings[key] = this.values[key]());\n\n        saveSettings(settings)\n            .then(() => {\n                app.alerts.show(this.successAlert = new Alert({ type: 'success', children: app.translator.trans('core.admin.basics.saved_message') }));\n            })\n            .catch(() => { })\n            .then(() => {\n                app.request({\n                    method: 'POST',\n                    url: app.forum.attribute('apiUrl') + '/pwa/refresh',\n                })\n                    .then(() => {\n                        app.alerts.show(this.successAlert = new Alert({ type: 'success', children: app.translator.trans('askvortsov-pwa.admin.pwa.refreshed_message') }));\n                    })\n                    .catch(() => { })\n                    .then(() => {\n                        this.saving = false;\n                        this.refresh();\n                    });\n            });\n    }\n}","import { extend } from 'flarum/extend';\r\nimport AdminNav from 'flarum/components/AdminNav';\r\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\r\n\r\nimport PWAPage from './components/PWAPage';\r\n\r\napp.initializers.add('askvortsov/flarum-pwa', () => {\r\n  app.routes.pwa = {path: '/pwa', component: PWAPage.component() };\r\n\r\n  app.extensionSettings['askvortsov-pwa'] = () => m.route(app.route('pwa'));\r\n\r\n  extend(AdminNav.prototype, 'items', items => {\r\n    items.add('pwa', AdminLinkButton.component({\r\n      href: app.route('pwa'),\r\n      icon: 'fas fa-mobile-alt',\r\n      children: app.translator.trans('askvortsov-pwa.admin.nav.pwa_button'),\r\n      description: app.translator.trans('askvortsov-pwa.admin.nav.pwa_text')\r\n    }));\r\n  });\r\n});\r\n","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/UploadImageButton'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['utils/saveSettings'];"],"sourceRoot":""}